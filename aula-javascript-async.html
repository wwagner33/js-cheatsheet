<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula: Programação Assíncrona em Node.js</title>
    <style>
        /* --- Estilos Gerais --- */
        :root {
            --cor-primaria: #026e00; /* Verde Node.js */
            --cor-fundo: #f0f0f0;
            --cor-texto: #333;
            --cor-slide-fundo: #fff;
            --cor-codigo-fundo: #2d2d2d;
            --cor-codigo-texto: #f2f2f2;
            --font-principal: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            background-color: var(--cor-fundo);
            font-family: var(--font-principal);
            color: var(--cor-texto);
        }

        /* --- Estrutura dos Slides --- */
        .presentation {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            box-sizing: border-box;
            background-color: var(--cor-slide-fundo);
            opacity: 0;
            visibility: hidden;
            transform: scale(0.95);
            transition: opacity 0.5s ease, transform 0.5s ease, visibility 0.5s;
            text-align: center;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        /* --- Conteúdo dos Slides --- */
        .slide h1 {
            font-size: 3.5em;
            color: var(--cor-primaria);
            margin-bottom: 20px;
        }

        .slide h2 {
            font-size: 2.5em;
            color: #555;
            margin: 0 0 40px 0;
            border-bottom: 3px solid var(--cor-primaria);
            padding-bottom: 10px;
        }

        .slide p, .slide li {
            font-size: 1.5em;
            line-height: 1.6;
            max-width: 800px;
        }

        .slide ul {
            list-style: none;
            padding: 0;
            text-align: left;
        }

        .slide ul li {
            position: relative;
            padding-left: 30px;
            margin-bottom: 15px;
        }

        .slide ul li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--cor-primaria);
            font-weight: bold;
        }
        
        .slide-title h1 {
            font-size: 4.5em;
        }
        
        .slide-title h2 {
            font-size: 2em;
            border: none;
            color: #666;
        }

        /* --- Estilos de Código --- */
        pre {
            background-color: var(--cor-codigo-fundo);
            color: var(--cor-codigo-texto);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 1.1em;
            text-align: left;
            width: 80%;
            max-width: 900px;
            overflow-x: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        code .keyword { color: #569cd6; } /* roxo/azul */
        code .string { color: #ce9178; } /* laranja */
        code .comment { color: #6a9955; } /* verde */
        code .function { color: #dcdcaa; } /* amarelo */
        code .number { color: #b5cea8; } /* verde claro */
        code .variable { color: #9cdcfe; } /* azul claro */

        /* --- Controles e Progresso --- */
        .progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 8px;
            background-color: var(--cor-primaria);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>

    <div class="presentation">

        <div class="slide active slide-title">
            <h1>Desvendando a Programação Assíncrona em Node.js</h1>
            <h2>De Callbacks a Async/Await</h2>
        </div>

        <div class="slide">
            <h2>O que vamos aprender hoje?</h2>
            <ul>
                <li>Síncrono vs. Assíncrono: A base de tudo.</li>
                <li>O Event Loop: O motor do Node.js.</li>
                <li>Callbacks: A forma clássica.</li>
                <li>Promises: A solução elegante.</li>
                <li>Async/Await: A sintaxe moderna.</li>
            </ul>
        </div>

        <div class="slide">
            <h2>O Mundo Síncrono (Bloqueante)</h2>
            <p>Tarefas são executadas em sequência. Uma precisa terminar para a próxima começar.</p>
            <p><strong>Analogia:</strong> Uma fila única no banco. Você DEVE esperar.</p>
        </div>
        
        <div class="slide">
            <h2>Síncrono na Prática</h2>
            <pre><code class="language-js"><span class="variable">console</span>.log(<span class="string">"1. Pedindo um café."</span>);

<span class="comment">// Tarefa que bloqueia a execução</span>
<span class="keyword">const</span> <span class="variable">inicio</span> = <span class="keyword">new</span> <span class="function">Date</span>().<span class="function">getTime</span>();
<span class="keyword">while</span> (<span class="keyword">new</span> <span class="function">Date</span>().<span class="function">getTime</span>() &lt; <span class="variable">inicio</span> + <span class="number">2000</span>);

<span class="variable">console</span>.log(<span class="string">"3. Café entregue!"</span>);
</code></pre>
            <p><strong>Resultado:</strong> A aplicação fica "congelada" por 2 segundos.</p>
        </div>

        <div class="slide">
            <h2>O Mundo Assíncrono (Não-Bloqueante)</h2>
            <p>Você inicia uma tarefa e segue para a próxima, sendo notificado quando ela termina.</p>
            <p><strong>Analogia:</strong> Pedir comida em um restaurante e receber um pager.</p>
        </div>

        <div class="slide">
            <h2>O Coração do Node.js: O Event Loop</h2>
            <ul>
                <li><strong>Call Stack:</strong> O que está sendo executado agora.</li>
                <li><strong>Node.js APIs:</strong> Onde as tarefas demoradas são delegadas.</li>
                <li><strong>Task Queue (Fila):</strong> Tarefas finalizadas esperam aqui.</li>
                <li><strong>Event Loop:</strong> Move tarefas da Fila para a Stack quando ela está vazia.</li>
            </ul>
        </div>

        <div class="slide">
            <h2>A Abordagem Clássica: Callbacks</h2>
            <p>Uma função passada como argumento para ser executada depois.</p>
            <pre><code class="language-js"><span class="keyword">const</span> <span class="variable">fs</span> = <span class="function">require</span>(<span class="string">'fs'</span>);

<span class="variable">fs</span>.<span class="function">readFile</span>(<span class="string">'arquivo.txt'</span>, <span class="string">'utf8'</span>, (<span class="variable">erro</span>, <span class="variable">dados</span>) => {
  <span class="keyword">if</span> (<span class="variable">erro</span>) { <span class="comment">/* trata erro */</span> }
  <span class="variable">console</span>.<span class="function">log</span>(<span class="variable">dados</span>);
});

<span class="variable">console</span>.<span class="function">log</span>(<span class="string">"O script continua..."</span>);
</code></pre>
        </div>

        <div class="slide">
            <h2>O Problema: "Callback Hell"</h2>
            <p>O aninhamento excessivo de funções, também conhecido como "Pirâmide da Perdição".</p>
            <pre><code class="language-js"><span class="function">operacao1</span>((<span class="variable">res1</span>) => {
  <span class="function">operacao2</span>(<span class="variable">res1</span>, (<span class="variable">res2</span>) => {
    <span class="function">operacao3</span>(<span class="variable">res2</span>, (<span class="variable">res3</span>) => {
      <span class="comment">// E assim por diante...</span>
    });
  });
});
</code></pre>
        </div>
        
        <div class="slide">
            <h2>Uma Solução Elegante: Promises</h2>
            <p>Um objeto que representa a promessa de um valor futuro.</p>
            <ul>
                <li><strong>pending:</strong> Estado inicial, aguardando.</li>
                <li><strong>fulfilled:</strong> Sucesso! A operação foi concluída.</li>
                <li><strong>rejected:</strong> Falha! A operação falhou.</li>
            </ul>
        </div>
        
        <div class="slide">
            <h2>Promises na Prática: .then() e .catch()</h2>
             <pre><code class="language-js"><span class="keyword">const</span> { <span class="variable">readFile</span> } = <span class="function">require</span>(<span class="string">'fs'</span>).<span class="variable">promises</span>;

<span class="function">readFile</span>(<span class="string">'arquivo.txt'</span>, <span class="string">'utf8'</span>)
  .<span class="function">then</span>(<span class="variable">dados</span> => {
    <span class="variable">console</span>.<span class="function">log</span>(<span class="variable">dados</span>);
  })
  .<span class="function">catch</span>(<span class="variable">erro</span> => {
    <span class="variable">console</span>.<span class="function">error</span>(<span class="variable">erro</span>);
  });
</code></pre>
        </div>

        <div class="slide">
            <h2>A Sintaxe Moderna: Async/Await</h2>
            <p>"Açúcar sintático" sobre Promises. Permite escrever código assíncrono que parece síncrono.</p>
             <ul>
                <li><strong>async:</strong> Declara que a função é assíncrona.</li>
                <li><strong>await:</strong> Pausa a execução da função até que uma Promise seja resolvida.</li>
            </ul>
        </div>

        <div class="slide">
            <h2>Async/Await na Prática</h2>
            <pre><code class="language-js"><span class="keyword">async function</span> <span class="function">leArquivo</span>() {
  <span class="keyword">try</span> {
    <span class="keyword">const</span> <span class="variable">dados</span> = <span class="keyword">await</span> <span class="function">readFile</span>(<span class="string">'arquivo.txt'</span>, <span class="string">'utf8'</span>);
    <span class="variable">console</span>.<span class="function">log</span>(<span class="variable">dados</span>);
  } <span class="keyword">catch</span> (<span class="variable">erro</span>) {
    <span class="variable">console</span>.<span class="function">error</span>(<span class="string">"Ops, deu erro:"</span>, <span class="variable">erro</span>);
  }
}
</code></pre>
        </div>
        
        <div class="slide">
            <h2>Próximos Passos</h2>
             <ul>
                <li><strong>Pratique!</strong> Converta callbacks para Promises e Async/Await.</li>
                <li><strong>Explore `Promise.all()`:</strong> Execute várias promises em paralelo.</li>
                <li><strong>Faça chamadas de API:</strong> Use bibliotecas como `axios` ou `node-fetch`.</li>
                <li><strong>Construa um projeto:</strong> Crie uma API com Express.js.</li>
            </ul>
        </div>
        
        <div class="slide">
            <h1>Perguntas?</h1>
            <h2>Obrigado!</h2>
        </div>

    </div>

    <div class="progress-bar"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.slide');
            const progressBar = document.querySelector('.progress-bar');
            let currentSlide = 0;

            function showSlide(index) {
                // Remove a classe 'active' de todos os slides
                slides.forEach((slide, i) => {
                    slide.classList.remove('active');
                });
                
                // Adiciona a classe 'active' ao slide atual
                if (slides[index]) {
                    slides[index].classList.add('active');
                }
                
                // Atualiza a barra de progresso
                const progress = ((index + 1) / slides.length) * 100;
                progressBar.style.width = `${progress}%`;
            }

            function nextSlide() {
                if (currentSlide < slides.length - 1) {
                    currentSlide++;
                    showSlide(currentSlide);
                }
            }

            function prevSlide() {
                if (currentSlide > 0) {
                    currentSlide--;
                    showSlide(currentSlide);
                }
            }

            // Event listener para as teclas do teclado
            document.addEventListener('keydown', (event) => {
                if (event.key === 'ArrowRight' || event.key === ' ') { // Barra de espaço também avança
                    nextSlide();
                } else if (event.key === 'ArrowLeft') {
                    prevSlide();
                }
            });

            // Inicia a apresentação no primeiro slide
            showSlide(currentSlide);
        });
    </script>

</body>
</html>
